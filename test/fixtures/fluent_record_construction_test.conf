<source>
  @type forward
  @id _test_forward_input
  bind "#{ENV['TEST_BIND_ADDRESS']}"
  port "#{ENV['TEST_FORWARD_PORT']}"
</source>

<source>
  @type monitor_agent
  bind "#{ENV['TEST_BIND_ADDRESS']}"
  port "#{ENV['TEST_MONITOR_PORT']}"
</source>

@include "#{ENV['TEST_CONF']}"

<label @OUTPUT>
  <match **>
    @type file
    @id _test_output
    path "#{ENV['TEST_OUTPUT_DIR']}/test"
    <format>
      time_format %FT%T.%9N%:z
    </format>
    <buffer>
      @type memory
      flush_mode immediate
    </buffer>
  </match>
</label>

<label @ERROR>
  <match **>
    @type file
    @id _test_error_output
    path "#{ENV['TEST_ERROR_OUTPUT_DIR']}/test"
    <buffer>
      @type memory
      flush_mode immediate
    </buffer>
  </match>
</label>
